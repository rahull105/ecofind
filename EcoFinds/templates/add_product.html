{% extends "base.html" %}
{% block content %}
<div class="form-container">
    <form method="POST" enctype="multipart/form-data">
        <h2>
            {% if edit %}
                <i class="fa-solid fa-pen-to-square"></i> Edit Product
            {% else %}
                <i class="fa-solid fa-plus"></i> Add New Product
            {% endif %}
        </h2>
        <input type="text" name="title" placeholder="Product Title" value="{{ product[1] if edit else '' }}" required>
        <select name="category" required>
            {% for cat in categories %}
                <option value="{{ cat }}" {% if edit and product[3]==cat %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>
        <textarea name="description" placeholder="Description" required>{{ product[2] if edit else '' }}</textarea>
        <input type="number" step="0.01" name="price" placeholder="Price" value="{{ product[4] if edit else '' }}" required>
        <div class="image-placeholder">
            <label for="photo"><i class="fa-solid fa-image"></i> + Add Product Photo</label>
            <input type="file" id="photo" name="photo" accept="image/*" style="display:block;margin:10px auto;">
            {% if edit and product[5] %}
                <img src="{{ url_for('static', filename=product[5]) }}" alt="Current Image" style="margin-top:10px;width:90px;border-radius:8px;">
            {% endif %}
        </div>
        <button type="submit">
            {% if edit %}
                <i class="fa-solid fa-floppy-disk"></i> Update Listing
            {% else %}
                <i class="fa-solid fa-paper-plane"></i> Submit Listing
            {% endif %}
        </button>
    </form>
</div>
{% endblock %}